# Perp Trading Agent Skills 文档库

## 📁 文件夹说明

本文件夹存放从**交易员访谈**中提炼的**合约交易策略**的 Agent Skill 设计文档。

### 用途

将位于 `../Notes-*.md` 中的交易员访谈记录转化为可编程的 Agent Skills，包括：
- 策略逻辑的详细描述
- 数据接口的标准化定义
- 架构设计和模块划分
- 风控规则和参数配置

### 文档类型

- **架构设计**：监控、执行、持仓管理等模块的设计
- **接口定义**：交易所无关的数据结构定义
- **策略逻辑**：信号生成、入场判断、出场条件等
- **配置参数**：可调整的参数及其来源说明

### 与访谈记录的关系

| 访谈文档 | 提炼的技能 | 核心策略 |
|---------|-----------|---------|
| [Notes-0xMumu.md](../Notes-0xMumu.md) | spread-arbitrage | 价差套利、暴跌接针 |
| Notes-划水.md | *(待开发)* | 震荡波段交易 |
| Notes-余人.md | *(待开发)* | 震荡波段交易 |
| 第二章-P小将流动性感知.md | *(待开发)* | 流动性感知交易 |

---

## 📚 当前技能列表

### 1. Spread Arbitrage（价差套利）

| 属性 | 值 |
|------|-----|
| **文件夹** | [spread-arbitrage/](spread-arbitrage/) |
| **来源访谈** | [Notes-0xMumu.md](../Notes-0xMumu.md) |
| **策略类型** | 价差套利、暴跌接针 |
| **状态** | 🟡 设计中 |
| **适用行情** | 震荡、下跌 |

**核心思路**：
> 监控暴跌时的爆仓事件，捕捉合约/现货价差，在短时间窗口（15-30 分钟）内吃 3-5% 反弹。

**关键特点**：
- ✅ 入场信号：ADL/爆仓事件 + 价差超过阈值
- ✅ 风控严格：开仓即带 TP/SL，脱离成本区设移动止损
- ✅ 持仓时间：短周期（小时级到日内级）
- ⚠️ 弱点：单边上涨行情容易失效

**文档清单**：
- [SKILL.md](spread-arbitrage/SKILL.md) - 完整的技能文档（YAML + 详细说明）
- [data-interfaces.md](spread-arbitrage/data-interfaces.md) - 数据接口定义
- [architecture.md](spread-arbitrage/architecture.md) - 架构设计
- [strategy-logic.md](spread-arbitrage/strategy-logic.md) - 策略逻辑
- [risk-management.md](spread-arbitrage/risk-management.md) - 风控规则
- [configuration.md](spread-arbitrage/configuration.md) - 配置参数

---

## 🚀 未来扩展方向

基于其他访谈记录，计划扩展的技能包括：

### 阶段 2：波段和叙事驱动（1 个月）

| 技能名称 | 来源访谈 | 策略类型 | 优先级 |
|---------|---------|---------|--------|
| **震荡波段交易** | Notes-划水.md、Notes-余人.md | K 线形态 + 支撑压力位 | 🔥 高 |
| **山寨叙事驱动** | Notes-0xMumu.md（山寨部分） | 消息面 + 叙事判断 | 🔥 高 |
| **清算监控预警** | 多个访谈（Hyperdash 使用） | 大户清算价位监控 | 🔶 中 |

### 阶段 3：高级策略（2-3 个月）

| 技能名称 | 来源访谈 | 策略类型 | 优先级 |
|---------|---------|---------|--------|
| **流动性感知交易** | 第二章-P小将流动性感知.md | 订单簿深度分析 | 🔶 中 |
| **滚仓策略** | 多个访谈中的滚仓技巧 | 趋势加仓 | 🔶 中 |
| **网格交易** | Notes-安然.md 等 | 震荡市网格 | 🔵 低 |

### 阶段 4：组合和优化（长期）

- [ ] 多策略组合框架
- [ ] 策略切换逻辑（根据市场状态）
- [ ] 机器学习信号优化
- [ ] 自动参数调优

---

## ⚠️ 注意事项

### 1. 风险提示

- 🚨 **策略限制**：所有策略都有其适用的市场环境，不存在"万能策略"
- 🚨 **参数验证**：文档中的参数来自访谈经验，**必须**经过回测和小资金实盘验证
- 🚨 **资金管理**：每个人有舒适的资金体量上限，超过上限操作会变形（0xMumu 访谈第 44-45 行）
- 🚨 **止损纪律**：必须严格执行止损，防止单边行情造成重大亏损

### 2. 实施建议

- ✅ **从文档开始**：先完成设计文档，理清架构和逻辑
- ✅ **从简单开始**：优先实现价差套利，验证框架可行性
- ✅ **从纸面开始**：先纸面交易测试，再小资金实盘
- ✅ **从验证开始**：连续复现几次再确认是系统而非运气（0xMumu 建议）

### 3. 参数调优原则

| 参数类型 | 调优方式 | 验证标准 |
|---------|---------|---------|
| **入场阈值** | 回测 + 敏感性分析 | 信号数量 vs 胜率平衡 |
| **止盈止损** | 历史数据统计 | 盈亏比 > 2:1 |
| **仓位大小** | 凯利公式 + 风险承受度 | 最大回撤 < 20% |
| **持仓时间** | 市场节奏分析 | 平均持仓时间 vs 收益 |

### 4. 市场适应性

不同策略在不同市场条件下的表现：

| 策略 | 单边上涨 | 单边下跌 | 震荡 | 高波动 | 低波动 |
|-----|---------|---------|------|--------|--------|
| **价差套利** | ❌ | ✅ | ✅ | ✅ | ❌ |
| **震荡波段** | ❌ | ❌ | ✅ | ⚠️ | ✅ |
| **叙事驱动** | ✅ | ⚠️ | ⚠️ | ✅ | ❌ |
| **流动性感知** | ✅ | ✅ | ✅ | ✅ | ⚠️ |

图例：✅ 适合 | ⚠️ 一般 | ❌ 不适合

### 5. 交易所对接

当前文档为**交易所无关**设计，具体对接需要：
- 实现交易所适配器（`IExchangeAdapter`）
- 对接 WebSocket 实时数据流
- 对接 REST API 订单接口
- 处理交易所特有的限制（rate limit、订单类型等）

**推荐对接顺序**：
1. Hyperliquid（原生链上 DEX，数据透明）
2. Binance（流动性最好，API 稳定）
3. Bybit（合约产品丰富）

---

## 📖 文档结构规范

每个技能文件夹应遵循以下结构：

```
skill-name/
├── SKILL.md                 # 完整的技能文档（必须）
│                            # - YAML 前置元数据
│                            # - Overview
│                            # - Strategy Background
│                            # - Prerequisites
│                            # - Quick Start
│                            # - Configuration Options
│                            # - Architecture
│                            # - Usage Patterns
│                            # - Output and Logging
│                            # - Troubleshooting
│
├── data-interfaces.md       # 数据接口定义（推荐）
│                            # - 交易所适配器接口
│                            # - 数据结构定义
│                            # - 事件类型枚举
│
├── architecture.md          # 架构设计（推荐）
│                            # - 模块划分
│                            # - 数据流向
│                            # - 组件交互
│
├── strategy-logic.md        # 策略逻辑详解（推荐）
│                            # - 信号生成算法
│                            # - 入场条件判断
│                            # - 出场条件判断
│                            # - 伪代码示例
│
├── risk-management.md       # 风控规则（推荐）
│                            # - 风控检查流程
│                            # - 仓位计算逻辑
│                            # - 限制和熔断机制
│
├── configuration.md         # 配置参数说明（推荐）
│                            # - 参数列表和默认值
│                            # - 参数来源追溯
│                            # - 调优建议
│
└── implementation-notes.md  # 实施注意事项（可选）
                             # - 常见问题
                             # - 性能优化建议
                             # - 已知限制
```

### 文档编写规范

1. **YAML 前置元数据**（SKILL.md 必须）
   ```yaml
   ---
   name: skill-name
   description: 一句话描述策略核心思路
   ---
   ```

2. **参数来源标注**（configuration.md 必须）
   - 每个参数必须注明来源（访谈原文、经验值、回测结果）
   - 引用访谈时标注行号（如"Notes-0xMumu.md 第 39 行"）

3. **风险提示**（SKILL.md 必须）
   - 明确策略的适用场景和弱点
   - 标注访谈中交易员提到的失败案例

4. **代码示例**
   - 使用伪代码或 TypeScript 示例
   - 注释清晰，逻辑易懂
   - 避免过早优化

---

## 🔗 相关资源

### 访谈记录
- [Notes-0xMumu.md](../Notes-0xMumu.md) - 短线合约交易员，价差套利和山寨叙事
- [Notes-划水.md](../Notes-划水.md) - 震荡波段交易
- [Notes-余人.md](../Notes-余人.md) - 长线持仓 + 波段
- [第二章-P小将流动性感知.md](../第二章-P小将流动性感知.md) - 流动性分析

### 框架参考
- `/home/ray/moltworker/skills/cloudflare-browser/SKILL.md` - Skill 文档格式参考
- `/home/ray/sonic-research/research-to-product/.claude/skills/r2p.md` - 复杂流程 Skill 参考

### 外部资料
- Hyperliquid 文档：https://hyperliquid.gitbook.io/
- OpenClaw/Moltbot Gateway：Agent 运行时框架
- Claude Agent SDK：自定义 Agent 开发

---

## 📝 变更日志

### 2026-02-12
- ✅ 创建 perp-trading-skills 文件夹
- ✅ 完成 README.md
- 🟡 开始设计 spread-arbitrage 技能文档

---

## 🤝 贡献指南

如果要添加新的技能文档：

1. **选择访谈记录**：从 `Notes-*.md` 中选择一个访谈
2. **提炼核心策略**：识别可量化、可编程的交易策略
3. **创建技能文件夹**：按照文档结构规范创建
4. **编写文档**：遵循编写规范，标注参数来源
5. **更新 README**：在"当前技能列表"中添加条目
6. **交叉验证**：确保与访谈记录的一致性

---

## 📧 联系方式

如有问题或建议，请通过以下方式联系：
- GitHub Issues：*(待添加)*
- 项目维护者：*(待添加)*

---

**最后更新**：2026-02-12
**维护者**：Ray
**状态**：🟡 活跃开发中
